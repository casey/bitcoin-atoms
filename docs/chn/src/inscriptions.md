铭文
============

铭文里可刻有任意内容，从而创造了比特币原生的数字人工制品，通常被称为 NFT。 铭文不需要侧链或单独
的代币。

这些铭刻的聪，可以使用比特币交易传输发送到比特币地址，并保存在比特币 UTXO 中。 这些交易、地址
和 UTXO 在所有方面都是正常的比特币交易、地址和 UTXO。除了为了发送单个聪，交易必须根据序数理论
控制输入和输出的顺序和值。

铭文内容是基于万维网标准的。铭文由内容类型（也称为 MIME 类型）和内容本身（字节串）组成。 这允许
从 Web 服务器返回铭文内容，并用于创建和使用HTML铭文并重新混合其他铭文内容。

铭文内容完全在链上，存储在taproot script-path spend脚本中。 Taproot 脚本对其内容的限制很少，
并且额外获得见证折扣，使得铭文内容存储相对经济。

因为taproot script-path spend脚本只能从现有的 taproot 输出中产生，因此使用两阶段commit/reveal
过程进行铭刻。首先，在commit中，创建一个提交到包含铭文内容的脚本的taproot 输出。 其次，在reveal
交易中，使用commit交易产生的输出，来显示链上的铭文内容。

铭文内容使用未执行条件中的数据推送进行序列化，称为“信封”。 信封由 OP_FALSE OP_IF … OP_ENDIF 组成，
包装任意数量的数据推送。 因为信封实际上是空操作，所以它们不会改变包含它们的脚本的语义，并且可以与任何
其他锁定脚本结合使用。

包含字符串“Hello, world!”的文本铭文 序列化如下：

```
OP_FALSE
OP_IF
  OP_PUSH "ord"
  OP_PUSH 1
  OP_PUSH "text/plain;charset=utf-8"
  OP_PUSH 0
  OP_PUSH "Hello, world!"
OP_ENDIF
```

首先字符串`ord`被推送，以消除铭文与信封其他用途的歧义。

`OP_PUSH 1` 表示下一次推送包含内容类型， `OP_PUSH 0` 表示后续数据推送包含内容本身，
大型铭文必须使用多次数据推送，因为 taproot 的少数限制之一是单个数据推送不得大于 520 字节。

铭文内容包含在reveal交易的输入中，并且铭文是铭刻在其第一个输出的第一个聪（Satoshi）上。 
我们可以使用熟悉的序数理论规则来跟踪这个聪 sat，允许它被转移、购买、出售、丢失和恢复。

内容
-------

铭文的数据模型是 HTTP 响应的数据模型，允许铭文由网络服务器提供服务并在网络浏览器中查看的内容。

沙盒
----------

HTML 和 SVG 铭文被沙箱化，以防止引用链下内容，从而保持铭文的不可变性和独立性。

这是通过在“iframes”中加载 HTML 和 SVG 铭文来完成的`sandbox` 属性，以及提供铭文内容
“Content-Security-Policy”标头。

递归
---------

沙箱的一个重要例外是递归：访问“ord”的“/content”允许端点，允许铭文访问其他端点的内容
通过请求 `/content/<INSCRIPTION_ID>` 来获取铭文。

这有许多有趣的用例：

- 重新混合现有铭文的内容。

- 将代码、图像、音频或样式表片段发布为公共的共享资源。

- 生成艺术收藏，其中算法使用JavaScript刻写，并从具有独特种子的多个铭文中实例化。

- 生成个人资料图片集，其中包含配件和属性刻录为单独的图像，或刻录在共享纹理图集中，然后
  组合，拼贴风格，在多个铭文中以独特的组合。

铭文可以访问的其他几个端点如下：

- `/blockheight`：最新区块高度。
- `/blockhash`：最新的块哈希。
- `/blockhash/<HEIGHT>`：给定块高度的块哈希。
- `/blocktime`：最新块的 UNIX 时间戳。