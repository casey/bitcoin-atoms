#!/usr/bin/env bash

set -euxo pipefail

rm -rf benchmark
mkdir benchmark


for height in 100 250 500 1000 2000; do
  sudo \
    CARGO_PROFILE_RELEASE_DEBUG=true \
    RUST_LOG=info \
    cargo flamegraph \
    --deterministic \
    --bin ord \
    --output benchmark/$height.svg \
    -- \
    --chain signet \
    --data-dir benchmark \
    --height-limit $height \
    index
done
